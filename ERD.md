# ERD + 정규화 개념 정리 (쉬운 버전)

---

## 1. ERD (Entity Relationship Diagram) 란?

- 데이터베이스 설계를 도와주는 **관계형 다이어그램**.
- 데이터 간 관계를 그림으로 표현한다.

---

## 2. Step 1: 정규화란?

- **정규화** = **이상(Anomaly)** 을 제거하는 과정.
- **이상(Anomaly)** 이란?
  - 데이터 삽입, 수정, 삭제 시 **공간 낭비**나 **오류**가 발생하는 문제.

| 이상 종류 | 설명 |
|:--|:--|
| 삽입 이상 | 일부 정보만 입력할 수 없음 |
| 수정 이상 | 중복 데이터 수정 시 오류 가능 |
| 삭제 이상 | 하나를 삭제했는데 다른 정보도 같이 사라짐 |

- 정규화 = **이상을 제거해서** 데이터베이스를 안정적으로 만든다.

---

## 3. Step 2: ERD 핵심 구성요소

| 구성요소 | 설명 |
|:--|:--|
| Entity (개체) | 테이블 (예: 학생, 학과) |
| Attribute (속성) | 테이블의 열(컬럼) (예: 이름, 학번) |
| Relationship (관계) | 테이블 간 연결 (예: 외래키 관계) |

---

## 4. Step 3: 정규화 (1NF ~ 5NF)

### ★ 1NF (제1정규형)

- **모든 컬럼은 원자값(Atomic Value)만 가진다.**
- 하나의 칸(셀)에 여러 값이 있으면 안 된다.

> 예시 (비정규형)  
> 수강과목: 수학, 영어 ❌

> 예시 (1NF 적용)  
> 수학  
> 영어  

---

### ★ 2NF (제2정규형)

- **부분 함수 종속 제거**  
- 복합키(키 2개 이상) 중 일부에만 종속된 컬럼이 있으면 분리한다.

> 복합키 X가 있을 때  
> X → Y (완전 함수 종속)

---

### ★ 3NF (제3정규형)

- **이행 함수 종속 제거**
- 키가 아닌 일반 컬럼이 또 다른 컬럼을 결정하면 분리.

> Before: X → Y → Z ❌  
> After: X → Y / Y → Z ✔️

---

### ★ BCNF (보이스-코드 정규형)

- **모든 결정자가 후보키** 여야 한다.
- 후보키가 아닌 컬럼이 다른 컬럼을 결정하면 분리.

---

### ★ 4NF (제4정규형)

- **다치 종속 제거**
- 하나의 엔터티에 독립적인 여러 리스트(컬렉션)가 있으면 분리.

> 예: 교수 하나가 여러 과목 + 여러 교재를 동시에 가진 경우.

---

### ★ 5NF (제5정규형)

- **조인 종속 제거**
- 조인을 해야만 원래 정보가 복원되는 문제를 없앤다.

> 복잡한 다대다 관계 분해.

---

## 5. 관계 설명 (Cardinality)

| 관계 종류 | 설명 | 예시 |
|:--|:--|:--|
| 1:1 (일대일) | 하나의 A는 하나의 B만 가진다. | 사람 - 주민등록증 |
| 1:N (일대다) | 하나의 A는 여러 개의 B를 가진다. | 학과 - 학생들 |
| N:M (다대다) | 여러 A가 여러 B를 가진다. | 학생 - 과목 (수강관계) |

---

## 6. 관계 설정 예시

| 관계 | 설명 |
|:--|:--|
| 학과 - 학생 | 1:N (학과는 많은 학생을 가진다.) |
| 학과 - 교수 | 1:N (학과는 많은 교수를 가진다.) |
| 교수 - 개설과목 | 1:N (교수는 여러 과목을 가르칠 수 있다.) |
| 과목 - 학생 | N:M (학생은 여러 과목을 수강하고, 과목도 여러 학생이 수강) |

---

## 7. 테이블 설계 예시

### 학과 (Department)
| 컬럼 | 설명 |
|:--|:--|
| dept_id | 학과코드 (PK) |
| dept_name | 학과명 |

---

### 학생 (Student)
| 컬럼 | 설명 |
|:--|:--|
| std_id | 학번 (PK) |
| std_name | 이름 |
| height | 키 |
| dept_id | 학과코드 (FK) |

---

### 교수 (Professor)
| 컬럼 | 설명 |
|:--|:--|
| prof_id | 교수코드 (PK) |
| prof_name | 교수명 |
| dept_id | 학과코드 (FK) |

---

### 개설과목 (Course)
| 컬럼 | 설명 |
|:--|:--|
| course_id | 과목코드 (PK) |
| course_name | 과목명 |
| prof_id | 교수코드 (FK) |
| start_date | 시작일 |
| end_date | 종료일 |

---

### 수강 (std_Course)
| 컬럼 | 설명 |
|:--|:--|
| std_id | 학번 (FK) |
| course_id | 과목코드 (FK) |

---

# ✅ 최종 한 줄 요약

**"ERD는 데이터 관계를 그림으로 표현하는 것이고, 정규화는 이상을 제거해 안정적인 DB를 만드는 과정이다."**

