1. SPRING?


-------------------------------------------------------
#1. SPRING?
-------------------------------------------------------
â–¶Step0. jsp
1. mvc1 - jsp ( controller ) ì—­í• 
2. mvc2 - servlet (controller) ì—­í• 
3. frontcontroller

â–¶Step1. framework
1. framework [ ë””ìì¸íŒ¨í„´ + ë¼ì´ë¸ŒëŸ¬ë¦¬ = í”„ë ˆì„ì›Œí¬ ]
2. ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ë¼ˆëŒ€ ì—­í• 

â–¶Step2. ioc + di
1. ioc
- inversion of control
- ì œì–´ì˜ ì—­ì „
- ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±~ì†Œë©¸ê¹Œì§€ ìƒëª…ì£¼ê¸°ë¥¼ ê°œë°œìê°€ ì•„ë‹ˆë¼ ì»¨í…Œì´ë„ˆê°€ í•˜ëŠ” ê²ƒ
- pojo ( plain old java object )

  class A{}
  A a1 = new A()

  ìƒì„± â†’ ì´ˆê¸°í™” â†’ ì„œë¹„ìŠ¤ â†’ ì†Œë©¸
   â†‘                                   â†“
    --------------------------------
   
    iocê°€ ì•„ë‹Œê²½ìš° - [ ê°œë°œìâ˜… â†’ ( Class A )
		                 â†’ ( Class B )
			      â†’ ( Class C )      ] ì»¨í…Œì´ë„ˆ

    iocì¸ ê²½ìš° - [ ê°œë°œì â† ( Class A )
		           â† ( Class B )
			â† ( Class C )â˜…    ]ì»¨í…Œì´ë„ˆ


2. di ( dependency injection : ì˜ì¡´ì„±ì£¼ì… )
- ê° í´ë˜ìŠ¤ê°„ì˜ ì˜ì¡´ê´€ê³„ë¥¼ [ì„¤ì •íŒŒì¼]ì„ í†µí•´ [ì»¨í…Œì´ë„ˆ]ê°€ ìë™ìœ¼ë¡œ ì—°ê²°
  ì¥ì  : ì½”ë“œ ë‹¨ìˆœí™” / ê²°í•©ë„ ì œê±°




â–¶Step3. ì‹¤ìŠµ
==================================
ì‹¤ìŠµ(1) ì„¤ì¹˜
==================================
* ë²„ì „ë‹¤ìš´ê·¸ë ˆì´ë“œ
0. java.sun.com - java11
	C:\Program Files\Java\jdk-11
java_home 11ë¡œë°”ê¾¸ê¸°
path javahome ë§¨ìœ„ë¡œ

1. ìŠ¤í”„ë§ 3ë²„ì „ ë‹¤ìš´ë¡œë“œ
2. ë‹¤ìš´ë¡œë“œ ê²½ë¡œ
https://github.com/spring-attic/toolsuite-distribution/wiki/Spring-Tool-Suite-3
3. ì••ì¶• - ê²½ë¡œì§§ê²Œ / ê³µë°±, í•œê¸€, íŠ¹ìˆ˜ê¸°í˜¸(-) ê²½ë¡œì— ìˆìœ¼ë©´ ë¹¼ê¸°

==================================
ì‹¤ìŠµ(2) spring setting
==================================

    1. dynamic web project - spring000
    2. configure  - [Convert to Maven Project]
    3. spring      - add Spring project Nature
    4. java se-11 / project facts, build path
    5. build path - add Libraries - JUnit 4

    êµ¬ì¡°í™•ì¸
	1. pom.xml            ì„¤ì¹˜ ë‹¤ìš´ë¡œë“œ
	2. src/main/java      ì‹¤ì œ ìë°”íŒŒì¼ ìœ„ì¹˜
	3. src/test/java        ì‹¤ì œ í…ŒìŠ¤íŠ¸íŒŒì¼ ìœ„ì¹˜
	4. src/main/webapp  jspíŒŒì¼ ìœ„ì¹˜

ì—°ìŠµë¬¸ì œ) spring001_di í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°


==================================
ì‹¤ìŠµ(3) spring mvc
==================================
1. ê²€ìƒ‰: spring
2. legacy project
3. mvc project

â€»í”ŒëŸ¬ê·¸ì¸
 \.metadata\.plugins\org.springsource.ide.eclipse.commons.content.core

â€»import í•´ì„œ ì™„ì„±ëœ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°

==================================
ì‹¤ìŠµ(4) spring ì •ë¦¬
==================================
1. í”„ë ˆì„ì›Œí¬
  - ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ë¼ˆëŒ€ ì—­í•  [ ë””ìì¸íŒ¨í„´ + ë¼ì´ë¸ŒëŸ¬ë¦¬ ]
2. IOC
   - ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ë¶€í„° ì†Œë©¸ê¹Œì§€ ìƒëª…ì£¼ê¸°ë¥¼ ìŠ¤í”„ë§ì´ ê´€ë¦¬
3. DI
  - ê° í´ë˜ìŠ¤ì˜ ì˜ì¡´ê´€ê³„ë¥¼ [ì„¤ì •íŒŒì¼]ì„ í†µí•´ì„œ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ ì—°ê²° 
4. BEAN
  - ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” ê°ì²´
  - beanFactory â† ApplicationContext


==================================
ì‹¤ìŠµ(4) spring di ì—°ìŠµ
==================================
    1. dynamic web project - spring000
    2. configure  - [Convert to Maven Project]
    3. spring      - add Spring project Nature
    4. java se-11 / project facts, build path
    5. build path - add Libraries - JUnit 4
    6. update mavenê¹Œì§€!

--
6. pom.xml ì„¸íŒ…

--
7. êµ¬ì„±í™•ì¸
    [AnimalFarm]  (ì‚¬ìš©)â†’    [<<interface>>Animal]   
   â†‘(ì‚½ì…)        â†‘(êµ¬í˜„)       â†‘ (êµ¬í˜„)   
    [beans.xml ]  (ìƒì„±)â†’     [Cat     /   Dog]

    >> di? ê°í´ë˜ìŠ¤ì˜ ì˜ì¡´ê´€ê³„ë¥¼ [ì„¤ì •íŒŒì¼]ì„í†µí•´ì„œ ì»¨í…Œì´ë„ˆê°€ ìë™ì—°ê²°

  1) ì¸í„°í˜ì´ìŠ¤
     com.company.ioctest  
   interface Animal
   ----------------------------------
   public interface Animal {
      public String eat();
      public String sleep();
      public String poo();
   }
   ----------------------------------

   2) êµ¬í˜„í´ë˜ìŠ¤  
      com.company.ioctest  
      Cat 
      Dog  
   
   package com.company.ioc;
   public class Cat  implements Animal{
      @Override public String eat() { return "Cat-eat"; }
      @Override public String sleep() { return "Cat-sleep"; }
      @Override public String poo() { return "Cat-poo"; }
   } 


   3) ì‚¬ìš©í´ë˜ìŠ¤ - AnimalFarm 
   package com.company.ioc;

   public class AnimalFarm {
      private String name;
      private Animal ani;
   
      public AnimalFarm() { super(); }
      public String getName() { return name; }
      public void setName(String name) { this.name = name; }
      public Animal getani() { return ani; }
      public void setani(Animal ani) { this.ani = ani; }
   
      public String aniSleep() { return name + ">" + ani.sleep(); }
      public String aniEat()   { return name + ">" + ani.eat(); }
      public String aniPoo()   { return name + ">" + ani.poo(); }
   
      public void print() { 
         System.out.println(  aniSleep()); 
         System.out.println(  aniEat()); 
         System.out.println(  aniPoo()); 
      }

   }





QUESTION1)  DI -   property ë¥¼ ì´ìš©í•˜ì—¬ ì…‹íŒ…í•˜ê³  JUnit Testë¥¼ í•˜ì‹œì˜¤
--1-1 com.company.test1  [ AnimalFarm ]
public class AnimalFarm1 {
   private String name;
   private Animal1 ani;  
}

--1-2 com.company.config   [ test1.xml] 
public void test1() {
   AnimalFarm1 farm = (AnimalFarm1) context.getBean("animalFarm1"); 
   farm.print();
}



QUESTION2)  DI -   constructor ë¥¼ ì´ìš©í•˜ì—¬ ì…‹íŒ…í•˜ê³  JUnit Testë¥¼ í•˜ì‹œì˜¤
--2-1 com.company.test2  [ AnimalFarm ]
public class AnimalFarm2 {
   private String name;
   private Animal ani;  
   public AnimalFarm2 (  String name, Animal ani ){  this.name=name;  this.ani = ani ;}
}

--2-2 com.company.config  [test2.xml]


 


>>DI? ê° í´ë˜ìŠ¤ì˜ ì˜ì¡´ê´€ê³„ë¥¼ [ì„¤ì •íŒŒì¼]ì„ í†µí•´ì„œ ì»¨í…Œì´ë„ˆê°€ ìë™ì—°ê²°


==================================
#3. Bean
==================================
1. bean springì´ ê´€ë¦¬í•˜ëŠ” ê°ì²´
2. xml vs Annotation
   - xml [ìš´ì˜]
   - ëª¨ë“  beanì„ ëª…ì‹œì ìœ¼ë¡œ xmlì— ë“±ë¡
   - ì—¬ëŸ¬ ê°œë°œìê°€ ê°™ì€ ì„¤ì •íŒŒì¼ì„ ê³µìœ í•´ì„œ ê°œë°œí•˜ë©´ ìˆ˜ì •ì‹œ ì¶©ëŒì´ ì¼ì–´ë‚  ê²½ìš°ê°€ ë§ìŒ.

  2-2. Annotation (Bean Scanning) [ê°œë°œ]
  - Bean @ì„ ë¶™ì—¬ì„œ ìë™ì¸ì‹
  - ê°œë°œì†ë„ í–¥ìƒ
  - Bean ê°„ì˜ ì˜ì¡´ê´€ê³„ë¥¼ íŒŒì•…í•˜ê¸° í˜ë“¦

â–¶2. @Component
1. @Component ì¼ë°˜ì ì¸ ì»´í¬ë„ŒíŠ¸
2. @Component êµ¬ì²´í™”ëœ í˜•ì‹ @Controller(ì›¹ìš”ì²­ ë°›ì•„ì„œ ì‘ë‹µ), @Service(ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§), @Repository(dbì—°ë™)

<context:component-scan base-package="ê²½ë¡œ"/>


==================================
#4. DB / MYBATIS
==================================
â–¶ DataSource
SimpleDriverDataSource ê°€ì¥ ë‹¨ìˆœí•œ ë²„ì „
- getConnection() ë§¤ë²ˆìƒì„±

> mysql-connector-java / spring-jdbc
<!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.28</version>
</dependency>
<!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>4.3.20.RELEASE</version>
</dependency>

â–¶2. Mybatis 
1. sqlì„ ë³„ë„ë¡œ íŒŒì¼ë¶„ë¦¬í•´ì„œ ê´€ë¦¬
2. ORM ( object relational mapping ) í”„ë ˆì„ì›Œí¬
3. mybatis
============================
1. SqlSessionFactoryBean

2. SqlSessionFactory  â†’ <<SqlSession>> â†’ mapper.xml
				(insert, update, delete, select,,,)
â€»SqlSessionFactory SqlSession ìƒì„±ê´€ë¦¬
â€»SqlSession : sqlì‹¤í–‰, íŠ¸ëœì­ì…˜
============================
4. ì‹¤ìŠµ
mybatis
mybatis-spring

   <!-- https://mvnrepository.com/artifact/org.mybatis/mybatis -->
   <dependency>
       <groupId>org.mybatis</groupId>
       <artifactId>mybatis</artifactId>
       <version>3.5.6</version>
   </dependency>
   <!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring -->
   <dependency>
       <groupId>org.mybatis</groupId>
       <artifactId>mybatis-spring</artifactId>
       <version>2.0.6</version>
   </dependency>


5. ì„¤ì •íŒŒì¼
   ## mapper ì„¤ì •íŒŒì¼(1)
   [Preferences] - [Xml] - Templates - New - New XML
   <?xml version="1.0" encoding="UTF-8" ?>
   <!DOCTYPE mapper
     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
   <mapper namespace="org.mybatis.example.BlogMapper">
   </mapper>
   
   ## mapper ì„¤ì •íŒŒì¼(2)  
   [Preferences] - [Xml] - Templates - New - New XML
   <?xml version="1.0" encoding="UTF-8" ?>
   <!DOCTYPE configuration
     PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
     "https://mybatis.org/dtd/mybatis-3-config.dtd">
   <configuration>
   </configuration>


==================================
#5. DB / MYBATIS (2)
==================================
â–¶1.  mybatis (1)
- TestDao, Impl, mapper.xml ì˜ íŒŒì¼ëŸ‰ì¤„ì´ê¸°
-  SqlSession sqlSession , namespace="com.company.dao.TestDao" ì½”ë“œì•ˆì— ìˆì–´ì„œ ë¶ˆí¸, ì„¤ì •íŒŒì¼ì„¤ì •

TestDao <<interface>>
    â†‘   
TestDaoImpl <<class>>
====================
   @Repository
   public class TestDaoImpl implements TestDao{
      @Autowired  private SqlSession sqlSession;  //sql ì‹¤í–‰
      ivate static final String namespace="com.company.dao.TestDao";   ... ì½”ë“œìƒëµ
   }
====================
test-mapper.xml




â–¶2.  mybatis (2)
- root-context.xml ì„¤ì •íŒŒì¼
before:  Impl êµ¬í˜„í´ë˜ìŠ¤ì‚­ì œ  - êµ¬í˜„í´ë˜ìŠ¤ ì—†ì• ê³ .... ì•ˆì—ìˆëŠ”ì„¤ì •ì„
   @Autowired  private SqlSession sqlSession;  //sql ì‹¤í–‰
   private static final String namespace="com.company.dao.TestDao"; 
after :  root-context.xml
   <!-- STEP3 mapperFactoryBean -->
   <bean id="testDao" class="org.mybatis.spring.mapper.MapperFactoryBean">
      <property name="sqlSessionTemplate" ref="sqlSession" />
      <property name="mapperInterface"    value="com.company.dao.TestDao" />
   </bean>

1. 006_1 mybatis í”„ë¡œì íŠ¸ ë³µì‚¬
2. 006_2 mybatis í”„ë¡œì íŠ¸ ë³µì‚¬ -    Impl êµ¬í˜„í´ë˜ìŠ¤ì‚­ì œ   / root-context ìˆ˜ì •

ì—°ìŠµë¬¸ì œ) BoardTestEx  ê°€ì„œ   MapperFactoryBean ë²„ì ¼ìœ¼ë¡œ ìˆ˜ì •
   spring007_ex_board   ì´ì „ë²„ì ¼ë³µì‚¬í•´ì„œ ì‚¬ìš©

â–¶3.  mybatis (3)
- MapperFactoryBean ë§¤ë²ˆ ì„¤ì •ì´ í˜ë“¦. ëª¨ë“  mapperì— ì„¤ì •í•˜ê¸° í˜ë“¦

- í•´ê²°ë°©ì•ˆ : MapperScannerConfigurer
1. MyDao
public @interface MyDao{}

2. mapperë¡œ ë§Œë“¤ì–´ì£¼ëŠ” interface
   @MyDao  public interface TestDao{}
   @MyDao  public interface UserDao{}
   @MyDao  public interface BoardDao{}

3. MyDao root-context.xml ë“±ë¡
	<bean id="" class="MapperScannerConfigurer">
	</bean>


==================================
#6. mvc project
==================================
â–¶1. mvc
>> ì„œë¡œ ì˜í–¥ì—†ì´ ì‰½ê²Œ ê³ ì¹  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì!
Model   		- ì •ë³´ (dto, dao, service)    
view			- í™”ë©´ (html, css, js/jquery)     
Controller		- ì²˜ë¦¬ (ìš”ì²­ì„ ë°›ì•„ì„œ ì²˜ë¦¬í›„ ì‘ë‹µ)

â–¶2. mvc1 vs mvc2
mvc1 - controllerì˜ ì—­í• ì„ jsp     ë‹´ë‹¹
mvc2 - controllerì˜ ì—­í• ì„ servlet ë‹´ë‹¹
Frontcontroller - ê³µí†µì‘ì—…ìˆ˜í–‰ â†’ ì„¸ë¶€ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì²˜ë¦¬


â–¶ spring MVC

[í´ë¼ì´ì–¸íŠ¸]
  â†“ â‘  list.do
[frontcontroller]
<<DispatcherServlet>> â†’ â‘¡ HandlerMapping - @Controller
					     â†“
				     â‘¢ ì„¸ë¶€Controller    - dbê°€ í•„ìš”í•˜ë©´ dbì²˜ë¦¬
          â†“â†‘
      â‘£  View 


â‘  í´ë¼ì´ì–¸íŠ¸ ( ì½”ìš”í…Œ - web.xml - root-context.xml / servet-context.xml / DispatcherServlet)
â‘¡ DispatcherServlet - HandlerMapping - @Controller /ì²˜ë¦¬í•  Controller í™•ì¸
â‘¢ ì„¸ë¶€Controller í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì²˜ë¦¬(service - ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§)
â‘£ ìš”ì²­ê²°ê³¼ì™€ View ì •ë³´ë¥¼ DispatcherServlet ì–˜í•œí…Œ ì¤Œ / Viewë¥¼ ê°œì²´ë¥¼ ìƒì„±í•´ì„œ ì‘ë‹µ

1.ì‹¤ìŠµ

1) pom.xml  spring-webmvc ë“±ë¡2) web.xml  ContextLoaderListener (ìŠ¤í”„ë§êµ¬ë™) / DispatcherServlet ( Frontcontroller / ê²½ë¡œ í›”ì¹˜ê¸°)
			root-context.xml(dbì„¤ì •) /servet-context.xml (view servlet ì„¤ì •)
3) config/servet-context.xml



   ## mapper ì„¤ì •íŒŒì¼(1)
   [Preferences] - [Xml] - Templates - New - New XML
   <?xml version="1.0" encoding="UTF-8" ?>
   <!DOCTYPE mapper
     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
   <mapper namespace="org.mybatis.example.BlogMapper">
   </mapper>
   
   ## mapper ì„¤ì •íŒŒì¼(2)  
   [Preferences] - [Xml] - Templates - New - New XML
   <?xml version="1.0" encoding="UTF-8" ?>
   <!DOCTYPE configuration
     PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
     "https://mybatis.org/dtd/mybatis-3-config.dtd">
   <configuration>
   </configuration>





==================================
#7. ìœ ìš©í•œ ê¸°ëŠ¥ë“¤
==================================
1. jstl
2. dto â†’ lombok
3. aop (ê´€ì ì§€í–¥)
4. HikariCP (dbcp / sql ê³¼ì • ë‹¤ ë³´ì´ê²Œ)
5. Tx ( sql ì—¬ëŸ¬ê°œ ì‹¤í–‰ë  ë•Œ ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ë©´ sql ë‹¤ ì²˜ë¦¬ ì•ˆë˜ê²Œ)


â–¶ jstl
1.porm.xml
<!-- https://mvnrepository.com/artifact/javax.servlet/jstl -->
<dependency>
         <groupId>javax.servlet</groupId>
         <artifactId>jstl</artifactId>
         <version>1.2</version>
</dependency>

2. Model
- table
- dto UserDto / mapper-config.xml
- dao UserDao / user-mapper.xml / root-context.xml (ë“±ë¡)

3. @Repository - Dao (sql ì‹¤í–‰)
   @Service - ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§ - ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥
 	 ìƒì„¸ë³´ê¸° : ì¡°íšŒìˆ˜ ì˜¬ë¦¬ëŠ” sql/ í•´ë‹¹ë²ˆí˜¸ ìƒì„¸ë³´ê¸°ë°ì´í„°
 	 ìˆ˜ì •ë³´ê¸° :                           í•´ë‹¹ë²ˆí˜¸ ìƒì„¸ë³´ê¸°ë°ì´í„°  
 	 ê¸€ì“°ê¸°    : ì´ë¯¸ì§€ì˜¬ë¦¬ê¸°ê¸°ëŠ¥ / ê·¸ ì´ë¯¸ì§€ì´ë¦„ ê²½ë¡œ ë° ë°ì´í„° insertì‹œ ì €ì¥



==================================
#8. restful
==================================





2.lombok

    0. https://mvnrepository.com/artifact/org.projectlombok/lombok
    1. https://projectlombok.org/download
    2. ë‹¤ìš´ë¡œë“œ
    3. ë”ë¸”í´ë¦­ /   cmdì°½     java  -jar    íŒŒì¼ì´ë¦„.jar
        ì„¤ì¹˜ê²½ë¡œ ì„¤ì •
    4. spring ë‹¤ì‹œ ì—´ê¸°

    â€» ë§Œì•½ ì¸ì‹ì´ ì•ˆë˜ë©´....
      1. Cë“œë¼ì´ë¸Œë¡œ ìŠ¤í”„ë§zip. ì˜®ê¸°ê¸° - ì••ì¶•í’€ê¸°
      2. ê²½ë¡œ ì§§ê²Œ


<!-- https://mvnrepository.com/artifact/org.projectlombok/lombok -->
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.18.18</version>
    <scope>provided</scope>
</dependency>

..........................................................................................
..........................................................................................
3. Aop(ê´€ì ì§€í–¥í”„ë¡œê·¸ë˜ë° : Aspect Oriented Programming )

1) í•µì‹¬ê¸°ëŠ¥ vs ë¶€ê°€ê¸°ëŠ¥
- í•µì‹¬ê¸°ëŠ¥ : ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- ë¶€ê°€ê¸°ëŠ¥ : ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë„ì™€ì£¼ëŠ” ê¸°ëŠ¥


2) Aspect
- AOP ( Aspect Oriented Programming )
- Aspect : ê´€ì , ì–´ë–¤í–‰ë™, ì‹œì‘, ì™„ë£Œ, ë°˜ë³µ ,,,, ë‚˜íƒ€ë‚´ëŠ” í˜•íƒœ
- Advice(ë¶€ê°€ê¸°ëŠ¥ì •ì˜) + PointCut(ì ìš©ë¶€ìœ„) = Aspect

3) ìš©ì–´
Target : ëŒ€ìƒ
Advice : ë¶€ê°€ê¸°ëŠ¥ì •ì˜
PonitCut : ì ìš©íƒ€ê²Ÿì— ë©”ì„œë“œë¡œ ëŒ€ìƒì„ ì„ ë³„í•˜ëŠ” ì •ê·œì‹
Weaving : Target (ëŒ€ìƒ)ì— Advice(ë¶€ê°€ê¸°ëŠ¥)ë¥¼ ì²˜ë¦¬(ì‚½ì…)í•˜ëŠ” ê³¼ì •

4) íŠ¹ì§•
- í”„ë¡ì‹œê¸°ë°˜ì˜ Aop
- í”„ë¡ì‹œ(ëŒ€ë¦¬)
- í”„ë¡ì‹œ Target (ëŒ€ìƒ)ì— Advice(ë¶€ê°€ê¸°ëŠ¥)ë¥¼ ì²˜ë¦¬(ì‚½ì…)í•˜ëŠ” ê³¼ì •ì—ì„œ ìƒì„±ë˜ëŠ” ê°ì²´

í˜¸ì¶œ â†’ [ Porxy[Target]  ]


<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjrt -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.7.3</version>
    <scope>runtime</scope>
</dependency>
<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.7.3</version>
    <scope>runtime</scope>
</dependency>
<!-- https://mvnrepository.com/artifact/org.springframework/spring-aop -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>4.3.28.RELEASE</version>
</dependency>


ìš©ì–´	ì§„ì§œ ì‰½ê²Œ í’€ì´
Target	ì§„ì§œ í•˜ê³  ì‹¶ì€ ëŒ€ìƒ (ì˜ˆ: íšŒì›ê°€ì… í•¨ìˆ˜)
Advice	ë¼ì›Œ ë„£ì„ ë¶€ê°€ê¸°ëŠ¥ (ì˜ˆ: ë¡œê·¸ ë‚¨ê¸°ê¸°)
PointCut	ì–´ë””ì— ë¼ì›Œ ë„£ì„ì§€ ê³¨ë¼ì£¼ëŠ” ì¡°ê±´ (ì˜ˆ: íšŒì›ê°€ì… í•¨ìˆ˜ì—ë§Œ ì ìš©)
Aspect	Advice + PointCut ë¬¶ì€ ê²ƒ (ë¶€ê°€ê¸°ëŠ¥+ëŒ€ìƒì„ íƒì„ ì„¸íŠ¸ë¡œ ê´€ë¦¬)
Weaving	ì‹¤ì œë¡œ ëŒ€ìƒì— ë¶€ê°€ê¸°ëŠ¥ ë¼ì›Œ ë„£ëŠ” ê³¼ì • (ì‹¤ì œ ì½”ë“œì— ì‚½ì…)
Proxy	ëŒ€ë¦¬ì¸(ê°€ì§œ) ê°ì²´. ëŒ€ì‹  ë¶€ê°€ê¸°ëŠ¥ê¹Œì§€ ì²˜ë¦¬í•´ì£¼ëŠ” ê»ë°ê¸°

--

í”¼ìì§‘ ë¹„ìœ  ğŸ•

Target: í”¼ì ë§Œë“¤ê¸°

Advice: "í”¼ì ë§Œë“¤ê¸° ì „ ì† ì”»ì–´ì•¼ì§€" (ë¶€ê°€ê¸°ëŠ¥)

PointCut: "í”¼ì ë§Œë“¤ ë•Œë§Œ ì† ì”»ì–´ì•¼ì§€" (ì–¸ì œ ë¼ì›Œë„£ì„ì§€ ì„ íƒ)

Aspect: "í”¼ì ë§Œë“¤ ë•Œ ì† ì”»ê¸°"ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ìŒ

Weaving: ì§„ì§œ í”¼ì ë§Œë“¤ê¸° ì „ì— ì† ì”»ëŠ” í–‰ë™ì„ ì½”ë“œì— ë¼ì›Œë„£ìŒ

Proxy: í”¼ì ìš”ë¦¬ì‚¬ ì˜†ì—ì„œ "ì† ì”»ì—ˆë‚˜ìš”?" ëŒ€ì‹  í™•ì¸í•˜ê³  ëŒ€ì‹  ì²˜ë¦¬í•´ì£¼ëŠ” ì•Œë°”ìƒ

..........................................................................................
..........................................................................................

4.HIkariCP(dbcp / sql ê³¼ì • ë‹¤ ë³´ì´ê²Œ)

1) pom.xml
2) db.properties / root-context.xml
3) hikari properties ì„¤ì •

-

db.driverClass=net.sf.log4jdbc.sql.jdbcapi.DriverSpy
db.url=jdbc:log4jdbc://localhost:3306/mbasic
db.username=root
db.password=1234

----------------------------
  <!--  DB ì—°ê²° ì„¤ì • (Datasource) -->
    <context:property-placeholder location="classpath:config/db.properties" />
    <bean id="hikariConfig" class="com.zaxxer.hikari.HikariConfig">
        <property name="driverClassName" value="${db.driverClass}" />
        <property name="jdbcUrl" value="${db.url}" />
        <property name="username" value="${db.username}" />
        <property name="password" value="${db.password}" />
    </bean>
    <bean id="datasource" class="com.zaxxer.hikari.HikariDataSource" 
          destroy-method="close">
          <constructor-arg ref="hikariConfig" />
    </bean>




..........................................................................................
..........................................................................................


5. Tx (sql ì—¬ëŸ¬ê°œ ì‹¤í•´ì˜¤ë”œ ë•Œ ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ë©´ sql ë‹¤ ì²˜ë¦¬ ì•ˆë˜ê²Œ)
- íŠ¸ëœì­ì…˜
- ì—¬ëŸ¬ë‹¨ê³„ì˜ ì²˜ë¦¬ë¥¼ í•˜ë‚˜ì˜ ì²˜ë¦¬ì²˜ëŸ¼ ë‹¤ë£¨ëŠ” ê¸°ëŠ¥
- ë°˜ì˜(commit) / ë˜ëŒë¦¬ê¸° (rollback)

1) pom.xml 

2) root-context.xml
- DataSourceTransactionManager
- <tx:annotion-driven/>





..........................................................................................
..........................................................................................



â–  STEP6. security
1. spring security?
1) ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ(ì¸ì¦, ì¸ê°€) ë‹´ë‹¹
2) filterì˜ íë¦„ì— ë”°ë¼ ì²˜ë¦¬

2. ì¸ì¦  vs  ì¸ê°€
1) ì¸ì¦ - ë³¸ì¸ì´ ë§ëŠ”ì§€ í™•ì¸            ì—¬ê¶Œ)-ë³¸ì¸ì´ ë§ëŠ”ì§€ ì¸ì¦
2) ì¸ê°€ - ì¸ì¦ëœ ì‚¬ìš©ìê°€ ì ‘ê·¼ê°€ëŠ¥   ì¡°ì¢…ì„ê¹Œì§€ ê°€ê¸°(X)

3. spring security ì•„í‚¤í…ì³ (1)
1) ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í¼ ë¡œê·¸ì¸ì‹œë„ (username + password ì „ë‹¬)
2)  UsernamePasswordAuthentication  ìš”ì²­ì •ë³´ - Authentication ìƒì„± 
3)  Authentication ì¸ì¦ì²˜ë¦¬

10) ì¸ì¦ì™„ë£Œ (ì‚¬ìš©ìì •ë³´)  SecurityContextHolderì— ë‹´ê¸°
   - AuthenticationSuccessHandler ì„±ê³µ!
   - AuthenticationFailureHandler  ì‹¤íŒ¨!

3. spring security ì•„í‚¤í…ì³ (2)
4)  Authentication Manager ì¸ì¦ë‹´ë‹¹
    - UsernamePasswordAuthentication Token ì€  Providerë¥¼ ì°¾ëŠ”ë° ì‚¬ìš©
5) AuthenticationProvider  - ë¡œê·¸ì¸ì •ë³´ì™€ dbì •ë³´ë¥¼ ë¹„êµ
6) UserDetailService  - dbì— ìˆëŠ” ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°


[ì‹¤ìŠµ]

1. ìŠ¤í”„ë§í”„ë¡œì íŠ¸ - pom.xml
  board ë§Œë“¤ì—ˆë˜ í”„ë¡œì íŠ¸ì— ì‹œíë¦¬í‹° ì¶”ê°€
2. localhost:8080/login    ë¡œê·¸ì¸ì°½ -> ì¸ì¦ (ë³¸ì¸í™•ì¸)
3. SecurityConfig.java - ì„¤ì •
4. Member               - @Entity
5. MemberRepository - curd(dao)
6. MemberService
7. Controller
8. View















